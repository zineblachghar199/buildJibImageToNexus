plugins {
    id 'java'
    id 'com.google.cloud.tools.jib' version '3.1.1'
}

repositories {
    mavenCentral()
}

dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-web'
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
}

jib {
    from {
        image = 'adoptopenjdk:11-jre-hotspot' // Image de base pour Jib
    }
    to {
        image = 'localhost:8082/repojenkins/node-docker-app:latest' // Image de destination pour Jib
        tags = ['latest']
        auth {
            username = project.findProperty('nexusUsername') ?: System.getenv('NEXUS_USERNAME')
            password = project.findProperty('nexusPassword') ?: System.getenv('NEXUS_PASSWORD')
        }
    }
}
